# Технический проект "Сервис отправки оповещений"

---

## Целевая архитектура

### Диаграмма контекста (C1):

![C1](static/c1.png)

На диаграмме изображена архитектура системы отправки уведомлений.

- Пользователи: Пользователи интерактивно взаимодействуют с системой, настраивая свои уведомления.
- Внешние сервисы (Микросервисы): Эти сервисы могут инициировать отправку уведомлений. Они отправляют данные в систему
  через балансировщик нагрузки.
- Load balancer (Балансировщик нагрузки): Он распределяет входящие запросы на соответствующие узлы для оптимизации
  использования ресурсов и максимизации пропускной способности.
- BFF (API gateway): Backend For Frontend служит точкой входа для запросов к системе. Он оптимизирует данные для
  клиентов и может также обеспечивать аутентификацию и авторизацию.
- Notification service (Программное обеспечение): Этот сервис отвечает за отправку уведомлений. Он обрабатывает запросы
  на отправку уведомлений и рассылает их на пользовательские устройства.
- Пользовательские устройства (Мобильные устройства, компьютер): Это устройства конечных пользователей, которые получают
  уведомления от системы.
- Users service (Микросервис): Этот сервис отвечает за управление и хранение информации о пользователях. Он может
  предоставлять такие данные, как адрес электронной почты, номер телефона и другие контактные данные.

### Диаграмма контекста (C2):

![C2](static/c2.png)

**Сервис уведомлений** это основа инфраструктуры, отвечающее за обработку входящих запросов на отправку
уведомлений. Она взаимодействует с различными рабочими процессами, такими как SMS, Email и Push. Эти рабочие процессы
специализируются на формировании и отправке уведомлений через конкретные каналы.

Эти рабочие процессы, в свою очередь, связаны с **Внешними системами**, которые фактически отправляют уведомления
конечным
пользователям. Например, чтобы отправить SMS, SMS Worker обращается к внешней SMS-системе.

Чтобы обеспечить отказоустойчивость и эффективное распределение нагрузки, все входящие запросы проходят через
**Балансировщик нагрузки**. Это гарантирует, что даже при высокой нагрузке или отказе одного из серверов, система
продолжит
функционировать без сбоев.

**Repeater service** играет критически важную роль в тех ситуациях, когда уведомление не может быть доставлено с первого
раза. Он следит за статусом каждого уведомления и, при необходимости, инициирует его повторную отправку.

Для хранения информации о пользователях и их настройках служит **User service** и отдельная база данных.

Система также предполагает взаимодействие с **External systems**. Эти сервисы могут
предоставлять дополнительные данные или функциональные возможности, которые могут потребоваться для обработки
уведомлений.

Таким образом, представленная архитектура обеспечивает гибкую и масштабируемую систему уведомлений, способную
адаптироваться к различным потребностям и обстоятельствам.

## ADL

|            ID	             |    Дата	    | Статус  |   	Участники	   | Решения                                                          |
|:--------------------------:|:-----------:|:-------:|:---------------:|:-----------------------------------------------------------------|
| [ADR-001](adrs/ADR-001.md) | 16.окт.2023 | Принято | Евгений Зеленов | Использовать систему очередей                                    |
| [ADR-002](adrs/ADR-002.md) | 16.окт.2023 | Принято | Евгений Зеленов | Выбор в пользу RabbitMQ как основной системы очереди             |
| [ADR-003](adrs/ADR-003.md) | 16.окт.2023 | Принято | Евгений Зеленов | Использовать балансировщик нагрузки                              |
| [ADR-004](adrs/ADR-004.md) | 16.окт.2023 | Принято | Евгений Зеленов | Разделить базы данных на три типа                                |
| [ADR-005](adrs/ADR-005.md) | 16.окт.2023 | Принято | Евгений Зеленов | Выбор баз данных                                                 |
| [ADR-006](adrs/ADR-006.md) | 16.окт.2023 | Принято | Евгений Зеленов | Внедрение компонента "repeater"                                  |
| [ADR-007](adrs/ADR-007.md) | 16.окт.2023 | Принято | Евгений Зеленов | Внедрить воркеры, которые будут извлекать уведомления из очереди |
| [ADR-008](adrs/ADR-008.md) | 16.окт.2023 | Принято | Евгений Зеленов | Резервное копирование                                            |