# Технический проект "Сервис отправки оповещений"

## Текущая архитектура

В текущей архитектуре у нас есть мобильное приложение, которое общается с компонентом "Controller", а он в свою очередь делает запросы к "Foo" и "Bar".

![alt text](static/current_arch.svg)

## Целевая архитектура

### Диаграмма контекста (C1):
![C1](static/c1.svg)

Предполагается, что любой из существующих компонентов может отправить оповещение пользователю. При этом существующие каналы связи и предпочтения по их использованию известны системе оповещений, компоненты остальной системы знать это не должны.

### Диаграмма контекста (C2):
![C2](static/C2.svg)

#### ADL С2:
| ID               | Дата       | Статус  | Участники         | Решения                                                               | 
|------------------|------------|---------|-------------------|-----------------------------------------------------------------------|
| [ADR-9](ADR9.md) | 08.10.2023 | Принято | Заказчик          | Использовать микросервисную архитектуру                               |
| [ADR-8](ADR8.md) | 08.10.2023 | Принято | Заказчик          | Использовать REST API для взаимодействия сервиса с внешними сервисами |
| [ADR-1](ADR1.md) | 08.10.2023 | Принято | Заказчик          | Использовать Nginx                                                    |
| [ADR-2](ADR2.md) | 08.10.2023 | Принято | Заказчик          | Использовать PostgreSQL в качестве хранилища                          |
| [ADR-3](ADR3.md) | 08.10.2023 | Принято | Заказчик          | Использовать ActiveMQ в качестве брокера сообщений                    |
| [ADR-4](ADR4.md) | 08.10.2023 | Принято | Заказчик          | Использовать Spring Boot как фреймворк                                |
| [ADR-5](ADR5.md) | 08.10.2023 | Принято | Заказчик          | Использовать Docker                                                   |

### Диаграмма контекста (C3):
![C3](static/C3.svg)

#### ADL С3:
| ID               | Дата       | Статус     | Участники   | Решения                                                                 | 
|------------------|------------|------------|-------------|-------------------------------------------------------------------------|
| [ADR-6](ADR6.md) | 08.10.2023 | Предложено | Тех.команда | Выделить отдельный spring сервис для обработки недоставленных сообщений |
| [ADR-7](ADR6.md) | 08.10.2023 | Принято    | Тех.команда | Использовать Spring Retry при отправке сообщений во внешние сервисы     |

### Критерии оценки прототипа

#### Cоответствие функциональным требованиям:
- Возможность рассылать оповещения по трём каналам связи данных типов: e-mail; SMS; push-уведомления для мобильных устройств
- Возможность принимать от пользователя системы настройки по каждому каналу связи для рассылки уведомлений (вкл/выкл, адрес/номер/логин) 
- Возможность учитывать настройки при последующих рассылках

#### Соответствиe нефункциональным требованиям:
- Система должна поддерживать легкую интеграцию новых каналов рассылки
- Система должна поддерживать масштабирование при росте нагрузок
- Система не должна терять сообщения
- Система не должна хранить личные данные
- Система должна быть построена на опенсурс решениях, либо на решениях из реестр отечественного ПО
