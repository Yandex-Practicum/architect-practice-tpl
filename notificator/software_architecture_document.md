# Технический проект "Сервис отправки оповещений"

## Текущая архитектура

В текущей архитектуре у нас есть мобильное приложение, которое общается с компонентом "Controller", а он в свою очередь делает запросы к "Foo" и "Bar".

![alt text](static/current_arch.svg)


## Целевая архитектура

### Диаграмма контекста (C1):
![C1](static/c1.svg)

Предполагается, что любой из существующих компонентов может отправить оповещение пользователю. При этом существующие каналы связи и предпочтения по их использованию известны системе оповещений, компоненты остальной системы знать это не должны.

### Диаграмма контекста (C2):

![[c2.svg]]

#### ADL C2
| ID          | Дата       | Статус  | Участники       | Решения                                                                                   |
| ----------- | ---------- | ------- | --------------- | ----------------------------------------------------------------------------------------- |
| [[ADR-001]] | 2023-10-08 | Принято | Соловьева Ирина | Использовать REST API для взаимодействия с пользователем                                  |
| [[ADR-002]] | 2023-10-08 | Принято | Соловьева Ирина | Использовать Nginx в качестве прокси сервера                                              |
| [[ADR-003]] | 2023-10-08 | Принято | Соловьева Ирина | Использовать Rabbit в качестве очереди для нотификаций                                    |
| [[ADR-004]] | 2023-10-08 | Принято | Соловьева Ирина | Использовать Mysql для хранения пользовательских настроек и неуспешных нотификаций        |
| [[ADR-005]] | 2023-10-09 | Принято | Соловьева Ирина | Повторять отправку нотификаций, в случае если она завершилась неудачей                    |
| [[ADR-006]] | 2023-10-09 | Принято | Соловьева Ирина | Сохранять нотификации, которые не удалось отправить 3 раза, в бд для последующего анализа |




### Диаграмма контекста (C3):

![[с3.svg]]

#### ADL C3
| ID      | Дата       | Статус  | Участники       | Решения                                                            |
| ------- | ---------- | ------- | --------------- | ------------------------------------------------------------------ |
| [[ADR-007]] | 2023-10-09 | Принято | Соловьева Ирина | Выделить отдельные провайдеры под каждый тип нотификации           |
| [[ADR-008]] | 2023-10-09 | Принято | Соловьева Ирина | Выделить отдельные сервисы для получения нотификаций и их отправки |
