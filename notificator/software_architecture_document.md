# Технический проект "Сервис отправки оповещений"

---

## Текущая архитектура

В текущей архитектуре у нас есть мобильное приложение, которое общается с компонентом "Controller", а он в свою очередь делает запросы к "Foo" и "Bar".

![alt text](static/current_arch.svg)

## Целевая архитектура

## Диаграмма контекста (C1):
![C1](static/_c1.png)

Предполагается, что любой из существующих компонентов может отправить оповещение пользователю. При этом существующие каналы связи и предпочтения по их использованию известны системе оповещений, компоненты остальной системы знать это не должны.

## Диаграмма контейнеров (C2):
![C2](static/_c2.png)


### Таблица ADL для схемы C2

|          Id           |    Дата    | Статус  | Участники      | Решения                                                                                 | 
|:---------------------:|:----------:|:-------:|----------------|-----------------------------------------------------------------------------------------|
| [ADR-1](ADR/ADR-1.md) | 05.10.2023 | Принято | Царьков Сергей | Выделение отдельного компонента для взаимодействия с пользователем и внешними системами | 
| [ADR-2](ADR/ADR-2.md) | 05.10.2023 | Принято | Царьков Сергей | Введение очереди поддерживающей маршрутизацию внутри себя                               |
| [ADR-3](ADR/ADR-3.md) | 05.10.2023 | Принято | Царьков Сергей | Введение реляционного хранилища для настроек пользователя и уведомлений                 |
| [ADR-4](ADR/ADR-4.md) | 05.10.2023 | Принято | Царьков Сергей | Введение фоновой службы для повторной отправки уведомления в очередь                    |
| [ADR-5](ADR/ADR-5.md) | 05.10.2023 | Принято | Царьков Сергей | Разделение контейнеров уведомителей на отдельные каналы связи                           |

## Диаграммы компонентов (C3)

### Диаграммы компонентов API:
![C3](static/_c3_1.png)

### Диаграммы компонентов Repeater:
![C3](static/_c3_2.png)

### Диаграммы компонентов SMS:
![C3](static/_c3_3.png)

### Диаграммы компонентов Push:
![C3](static/_c3_4.png)

### Диаграммы компонентов Email:
![C3](static/_c3_5.png)

### Таблица ADL для схем C3

|          Id           |    Дата    | Статус  | Участники      | Решения                                                    | 
|:---------------------:|:----------:|:-------:|----------------|------------------------------------------------------------|
| [ADR-6](ADR/ADR-6.md) | 06.10.2023 | Принято | Царьков Сергей | Основной стек кодовой базы - .net 6                        | 
| [ADR-7](ADR/ADR-7.md) | 06.10.2023 | Принято | Царьков Сергей | Внедрение компонентов повтора отправки уведомлений в шлюзы |


#### Статус
| Название   | Комментарий                                       |
|------------|---------------------------------------------------|
| Предложено | Решение предложено. Находится на рассмотрении.    |
| Принято    | Решение рассмотрено и принято к исполнению.       |
| Отклонено  | Решение рассмотрено и отклонено.                  |
| Заменено   | Решение заменено иным.                            |
| Устарело   | Решение устарело, идет работа над новым решением. |
