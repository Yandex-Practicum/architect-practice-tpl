#### ID: [ADR-0004](ADR-0004.md)

#### Дата: 09.10.2023

#### Статус: Предложено

#### Участники:
* Емельянов Денис Владимирович

#### Решения:
* Использование брокера сообщений для обработки отправляемых сообщений
* Взаимодействие с сервисом управления пользовательскими данными клиентских служб и сервиса отправки сообщений должно быть синхронным

#### Контекст:
* Ввиду того, что запрос на отправку сообщения будет обрабатываться несколькими службами, то время обработки будет увеличиваться.
* Для уменьшения времени ответа передача запроса на отправку сообщения должна происходить асинхронно

* Из описания системы сервис пользовательских данных не будет подвергаться серьезным нагрузкам

#### Последствия:

#### Положительные:
* Уменьшение времени ответа на запрос отправки сообщения
* Дополнительная надежность при отказе сервисов отправки сообщений, т.к. брокер обеспечит доставку сообщения, после восстановления

* Простота реализации запросов к службе пользовательских данных
* Синхронность запросов, снизит затрат на поддержание последовательности и целостности пользовательских данных за счет локальных транзакций

#### Отрицательные:
* Клиентская система не получит мгновенно сообщение о статусе отправки, возможно стоит предусмотреть отдельный механизм оповещения клиентских систем

* Увеличение задержки при обращении к сервису пользовательских данных
