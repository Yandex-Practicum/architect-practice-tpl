#### ID: ADR-018

#### Дата: 16.10.2023

#### Статус: Предложено

#### Участники:
* Евгений Климов

## Реализация механизма мультиплексирования, адресной отправки и обработки особенностей разных каналов связи

#### Введение:

Этот документ объединяет два ADR: [ADR-003 Реализация механизма мультиплексирования и адресной отправки](adr_003.md) и [ADR-004 Обработка особенностей разных каналов связи](adr_004.md), чтобы обеспечить комплексное решение, связанное с механизмом мультиплексирования, адресной отправкой и обработкой особенностей разных каналов связи.

**Решения:**

1. Для реализации механизма мультиплексирования и адресной отправки в рамках выбранных технологий будет разработан специализированный модуль внутри системы оповещений. Этот модуль будет отвечать за определение целевых каналов связи для каждого оповещения с учетом настроек пользователя и характеристик оповещения.

2. Для обработки особенностей разных каналов связи, будут разработаны специальные компоненты и модули, которые будут учитывать уникальные характеристики каждого канала и решать следующие задачи:
    - Ограничение символов в SMS: Будет создан компонент, который автоматически разбивает длинные тексты оповещений на более короткие SMS-сообщения в соответствии с ограничением на количество символов.
    - Управление стоимостью SMS: Для мониторинга и контроля затрат на SMS-оповещения будет разработан инструмент, который отслеживает стоимость каждого отправленного SMS и предупреждает о возможных перерасходах.
    - Лимиты пуш-очередей провайдеров: Для обеспечения надежной доставки push-уведомлений через FCM, будет настроен мониторинг лимитов пуш-очередей у провайдера (Firebase Cloud Messaging), чтобы избегать сбоев из-за превышения лимитов.

**Обоснование:**
- Мультиплексирование и адресная отправка: Эти функции позволят более эффективно отправлять оповещения и доставлять их пользователям в соответствии с их настройками и предпочтениями.
- Обработка особенностей разных каналов связи: Эта функциональность обеспечит надежность и эффективность системы оповещений, учитывая уникальные характеристики различных каналов связи.

**Альтернативы:**
- Использование сторонних библиотек и сервисов: Вместо разработки собственных модулей и компонентов можно рассмотреть интеграцию с сторонними библиотеками и сервисами, предоставляющими подобные функции.

**Последствия:**

***Положительные:***
- Реализация механизма мультиплексирования и адресной отправки обеспечит более эффективную и надежную доставку оповещений.
- Обработка особенностей разных каналов связи позволит системе оповещений учитывать уникальные требования каждого канала и предоставлять оповещения в соответствии с ними.
- Пользователи получат оповещения, соответствующие ограничениям и требованиям различных каналов связи, что обеспечит улучшенное взаимодействие с системой.
- Мониторинг и контроль затрат на SMS-сообщения помогут оптимизировать бюджет системы оповещений.

***Отрицательные:***
- Разработка и внедрение этих компонентов потребуют дополнительных ресурсов и времени.
- Требуется систематический мониторинг стоимости SMS и лимитов пуш-очередей, что также потребует времени и усилий.
- Необходимо обеспечить согласованность между различными компонентами обработки, чтобы избеж
