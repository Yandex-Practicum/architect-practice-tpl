#### ID: ADR-003

#### Дата: 07.10.2023

#### Статус: Принято

#### Участники:
* Жмурко Константин

#### Решения:
* Использовать брокер для доставки уведомлений обработчикам [RabbitMQ](https://www.rabbitmq.com/)

#### Контекст:
Отправка писем (переотправка неудачных писем) и смс может занимать значительное время, кроме того количество поступаемых уведомлений может быть больше
чем возможности по их обработке. При хранении сообщений в памяти есть возможность их потери при сбоях. Необходимо
обеспечить безопасное хранение поступивших, но еще не обработанных уведомлений. Для решения этой проблемы целесообразно
использовать решение на основе очередей, которое обеспечит сохранность сообщения до его обработки, а так-же позволит
увеличивать количество обработчиков без внесения изменений в сервис. Так-же необходима возможность маршрутизации
сообщений к различным обработчикам.

По итогам поисков самых популярных технологий из упоминаний в открытых источниках выбрано несколько потенциальных кандидатов:
* Kafka
* RabbitMQ
* ActiveMQ

Kafka - необходимы дополнительные решения для маршрутизации
ActiveMQ - сложен в настройке, недостаточно полная документация
RabbitMQ - прост в использовании, хорошая документация, решает поставленные задачи

Для использования в сервисе выбран брокер RabbitMQ


#### Последствия:
##### Положительные:
* возможность получения большего количества уведомлений чем имеемые возможности по отправке
* гарантия сохранности уведомления при сбоях
* возможность увеличения количества обработчиков уведомлений
* возможность контролировать скорость обработки уведомлений

##### Отрицательные:
* необходимость поддержки и сопровождения дополнительного компонента
* увеличение сложности реализации
