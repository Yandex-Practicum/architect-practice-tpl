#### ID: ADR-010

#### Дата: 13.10.2023

#### Статус: Предложено

#### Участники:
* Стайнов Л. А.

#### Решения:
Предусмотреть хранилище для уведомлений, упавших на отправке, чтобы вернуть их в очередь для повторной попытки.

#### Контекст:
Мы не можем гарантировать 100% успеха по доставке уведомлений с первой попытки. Что мы можем предпринять: хранить упавшие уведомления и отправлять их обратно в очередь до N раз. Точное число выясним при интеграционном тестировании прототипа. 

### Последствия:
#### Положительные:
- Повышается надежность сервиса
- Понижается число "потерявшихся" уведомлений
#### Отрицательные:
- Дополнительное хранилище - больше нагрузки на инфраструктуру и дополнительные силы на сопровождение
- Появляется неиллюзорный риск падения всех сообщений в очереди разом, что может влечь за собой переполнение памяти. Нужно обязательно предусмотреть срок жизни упавшего уведомления и предел хранимого количества.