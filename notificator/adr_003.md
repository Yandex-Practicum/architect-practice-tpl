#### ID: ADR-003

#### Дата: 2023.10.07

#### Статус: Предложено

#### Участники:
* Абдрахманов Марат

#### Решения:
* Для хранения пользовательских настроек по каждому каналу связи используется хранилище "Параметры отправителя".
* Для хранения всех выполненных рассылок используется хранилище "БД хранения рассылок".
* За управление формированием уведомлений отвечает Notify Service, в части:
    * Принимает пользовательские настройки по каждому каналу связи для рассылки уведомлений и сохраняет их в хранилище "Параметры отправителя".
    * Информацию по каждой отправленной рассылке фиксирует в хранилище "БД хранения рассылок".
    * Выполняет рассылку заданий на посылку уведомлений по заданному регламенту (периодически, единоразово) путем отправки в Kafka в топик send_notify соответствующих сообщений.


#### Контекст:
Согласно ТЗ необходимо принимать от пользователя системы настройки по каждому каналу связи для рассылки уведомлений (вкл/выкл, адрес/номер/логин) и учитывать эти настройки при последующих рассылках. Также считаю, что необходимо сохранять информацию о каждой отправленной рассылке.

#### Последствия:

#### Положительные:
* Использование отдельных хранилищ для настроект и для фиксации посылок в будущем позволит более гибко ими управлять в части доступа и расширения (м.б. потребуется шардировать "БД хранения рассылок").
* Ограничение Notify Service только бизнес-задачами соответствует хорошим практикам проектирования, в частности принцип единой ответственности, и потребует меньше ресурсов на сопровождение кодовой базы. 
* Упрощение тестирования Notify Service'а.

#### Отрицательные:
* Допольнительные ресурсы на сопровождение двух хранилищ вместо одного.