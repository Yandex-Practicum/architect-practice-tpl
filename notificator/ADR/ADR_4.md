#### ID: ADR_4

#### Дата: 2023.10.13

#### Статус: Принято

#### Участники:
> [Лица, участвующие или ответственные за принятие решения]
* Павел Морозов

#### Решения:
> [Краткие описания принятых архитектурных решений]

В качестве брокера сообщений использовать [RabbitMQ](https://www.rabbitmq.com).

#### Контекст:
> [Контекст в рамках которого принимались решения, описывающий ситуацию, которая привела к тому какие решения были приняты]

Согласно [ADR_1](ADR/ADR_1.md) брокер сообщений. Выбор пал на [RabbitMQ](https://www.rabbitmq.com). Обоснование выбора см. ниже.

#### Последствия:
> [Результаты к которым могут или гарантированно приведут принятые решения. Они могут быть как положительным так и отрицательными]

##### Положительные:
* очереди в rabbitmq могут быть durable 
  * т.е. данные хранятся не только в RAM, поэтому сможем пережить падение
* в rabbitmq имеется маршрутизация\
  (как минимум будем использовать разные очереди для разных каналов связи)
* метрики для prometheus из коробки ([ссылка](https://www.rabbitmq.com/prometheus.html))
* в компании имеется опыт его применения
* популярный/распространенный инструмент
* open source решение

##### Отрицательные:
* придется самим реализовывать логику повторной отправки сообщения\
 ([например так](https://habr.com/ru/companies/domclick/articles/500978/))
* требует дополнительных затрат на поддержку
