#### ID: ADR-2

#### Дата: 05.10.2023

#### Статус: Принято

#### Участники:
* Царьков Сергей

#### Решения:
* Введение очереди поддерживающей маршрутизацию внутри себя


#### Контекст:
Для того чтобы можно было справиться с большой нагрузкой и иметь возможность горизонтально масштабироваться в моменте отправки уведомлений
необходимо внедрить асинхронный подход. То есть при получении запроса складывать уведомления в очередь.

#### Выбор технологии:
Основные рассмотренные:
* RabbitMq. Программный брокер сообщений на основе стандарта AMQP — тиражируемое связующее программное обеспечение, ориентированное на обработку сообщений.
* Apache Qpid. Система сообщений с открытым кодом (с лицензией Apache 2.0), реализующая AMQP протокол. Он предоставляет управление транзакциями, очереди, распределение, защиту, управление, кластеризацию, объединение и гетерогенную мультиплатформенную поддержку.
* Apache ActiveMQ. Брокер сообщений с открытым исходным кодом (распространяется под лицензией Apache 2.0), реализующий спецификацию JMS 1.1. Среди возможностей — кластеризация, возможность использовать для хранения сообщений различные СУБД, кэширование, ведение журналов.
  Среди возможностей — кластеризация, возможность использовать для хранения сообщений различные СУБД, кэширование, ведение журналов.
* Apache Kafka.  Распределённый программный брокер сообщений с открытым исходным кодом, разрабатываемый в рамках фонда Apache на языках Java и Scala. Цель проекта — создание горизонтально масштабируемой платформы для обработки потоковых данных в реальном времени с высокой пропускной способностью и низкой задержкой. Kafka может подключаться к внешним системам (для импорта и экспорта данных) через Kafka Connect[⇨], а также может использоваться в задачах больших данных при помощи библиотеки Kafka Streams[⇨]. Использует собственный двоичный протокол передачи данных на основе TCP, группирующий сообщения для снижения накладных расходов на сеть

Было принято решение внедрить RabbitMq. 
ActiveMQ не имеет возможности роутить сообщения. Qpid - последняя версия от 2018 года. Apache Kafka использует pull модель. Предполагается, что в данной задаче push модель выгоднее.


#### Последствия:

#### Положительные:
* Введение асинхронной обработки уведомлений
* Возможность горизонтального масштабирования отправителей уведомлений

#### Отрицательные:
* Дополнительный сервис для поддержки
