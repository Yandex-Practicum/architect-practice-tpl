#### ID: ADR_1

#### Дата: 2023.10.13

#### Статус: Принято

#### Участники:
> [Лица, участвующие или ответственные за принятие решения]
* Павел Морозов

#### Решения:
> [Краткие описания принятых архитектурных решений]

Реализовывать проект с использованием модульной архитектуры. Обоснование выбора см. [Последствия](#последствия).

#### Контекст:
> [Контекст в рамках которого принимались решения, описывающий ситуацию, которая привела к тому какие решения были приняты]

Система будет иметь след. вид:
* API Gateway
  * отвечает за авторизацию, маршрутизацию и балансировку нагрузки
* Сервис рассылки оповещений
  * управляет отправкой оповещений, вместе с фичами настройки и мультиплексирования отправки ("настройки" включают в себя "лимиты")
* БД
  * хранит настройки канала связи
* Брокер сообщений
  * хранит очередь сообщений, контролирует доставку\
    ([примерная схема контроля доставки](https://habr.com/ru/companies/domclick/articles/500978/))
* "Сервис для отправки *"
  * компонент, который знает о конкретном канале связи и учитывает их ограничения
* Логирование
  * нужен для возможности "обозреть" систему
  * при написании сервисов потребуется соблюдать определенные соглашения касательно логирования

#### Последствия:
> [Результаты к которым могут или гарантированно приведут принятые решения. Они могут быть как положительным так и отрицательными]

##### Положительные:
* возможность горизонтально масштабировать систему
* проще добавлять новые каналы оповещений и менять существующие\
  (просто пишем новый "сервис для отправки *" и запускаем его)
* возможность более эффективно утилизировать инфраструктуру за счет изменения количества "сервисов для отправки *"\
  (пример: оставить 1 инстанс "сервиса для отправки СМС" в случае если это будет малоиспользуемый канал оповещения)

##### Отрицательные:
* сложнее мониторинг, в том числе придется реализовывать трассировку\
(чтобы иметь возможность отследить весь путь входящего запроса)
* сложнее инфраструктура
  * данный пункт частично нивелируется тем, что в компании уже есть инфраструктурное подразделение, которое выделит ресурсы и поможет с первоначальной настройкой\
    (поможет настроить мониторинг инфры, алёрты и т.п.)
